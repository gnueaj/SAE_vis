{
  "description": "Configuration for Thematic-LM coding stage (SAE feature explanations). Following paper: Qiao et al. WWW '25",

  "run_config": {
    "description": "Run-specific settings. Edit these before each run.",
    "start_feature": null,
    "end_feature": null,
    "limit": 10,
    "mode": "overwrite", 
    "load_codebook": "../master/codebook.json",
    "resume": false
  },

  "input_paths": {
    "explanation_embeddings_path": "../master/explanation_embeddings.parquet"
  },

  "output_paths": {
    "thematic_codes_parquet": "../master/thematic_codes.parquet",
    "codebook_json": "../master/codebook.json"
  },

  "llm_config": {
    "description": "Following paper Section 4: GPT model with temperature=1.0, top_p=1.0, JSON mode",
    "provider": "openai",
    "model": "gpt-5-mini",
    "temperature": 1.0,
    "top_p": 1.0,
    "max_tokens": 2048,
    "rate_limit_rpm": 500
  },

  "embedding_config": {
    "model": "all-MiniLM-L6-v2",
    "device": "cuda"
  },

  "coder_config": {
    "description": "SAE-specific coder with domain guidance for pattern identification",
    "coders": [
      {
        "id": "sae",
        "identity": "sae"
      }
    ]
  },

  "codebook_config": {
    "description": "Following Thematic-LM paper: reviewer decides ALL merge/new decisions. Top-k=10 similar codes retrieved (Section 4).",
    "top_k_retrieval": 10,
    "min_similarity": 0.0
  },

  "processing_config": {
    "description": "Per-item processing, up to 100 quotes per code (paper: 20), 1-3 codes per explanation",
    "checkpoint_every": 30,
    "max_codes_per_explanation": 3,
    "max_quotes_per_code": 100
  }
}
