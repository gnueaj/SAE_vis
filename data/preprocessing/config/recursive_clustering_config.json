{
  "description": "Configuration for Recursive UMAP + HDBSCAN clustering on high-dimensional embeddings (Spotify Engineering approach)",

  "output_directory": "data/recursive_clustering",
  "embeddings_directory": "data/embeddings",

  "sae_model_name": "google/gemma-scope-9b-pt-res",
  "sae_position": "layer_30/width_16k/average_l0_120",
  "feature_range_start": 0,
  "feature_range_end": 1000,

  "explanation_sources": [
    "llama_e-llama_s",
    "gwen_e-llama_s",
    "openai_e-llama_s"
  ],

  "max_recursion_depth": 3,
  "min_cluster_percentage": 1.0,
  "save_visualizations": true,

  "feature_parameters": {
    "umap_n_neighbors": 25,
    "umap_min_dist": 0.0,
    "umap_metric": "cosine",
    "umap_n_components": 20,
    "hdbscan_min_cluster_size": 10,
    "hdbscan_min_samples": 5,
    "hdbscan_metric": "euclidean",
    "min_cluster_size_for_recursion": 10
  },

  "explanation_parameters": {
    "umap_n_neighbors": 15,
    "umap_min_dist": 0.0,
    "umap_metric": "cosine",
    "umap_n_components": 10,
    "hdbscan_min_cluster_size": 40,
    "hdbscan_min_samples": 10,
    "hdbscan_metric": "euclidean",
    "min_cluster_size_for_recursion": 40
  },

  "comment": "Recursive UMAP + HDBSCAN on HIGH-DIMENSIONAL embeddings. At each level: (1) Apply UMAP to reduce high-dim â†’ n_components dimensions, (2) Apply HDBSCAN to find clusters, (3) For each cluster, extract high-dim subset and recurse. umap_n_components is configurable (2 for visualization, 5+ for clustering). Features use SAE decoder weights from HuggingFace (orthogonal features with cosine similarity < 0.25). Explanations use embeddings from data/embeddings/ directory (higher internal similarity)."
}
